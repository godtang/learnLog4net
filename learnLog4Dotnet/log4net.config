<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
    </configSections>

    <log4net>
        <root>
            <level value="ALL"/>
        </root>
        <logger name="UB.File">
            <level value="ALL"/>
            <appender-ref ref="RollingLogFileAppender"/>
        </logger>

        <logger name="UB.Console">
            <appender-ref ref="ColoredConsoleAppender"/>
        </logger>

        <logger name="UB.Database">
            <appender-ref ref="ADONetAppender"/>
        </logger>

        <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
            <!--日志路径-->
            <File value= ".\log\"/>
            <!--是否是向文件中追加日志-->
            <AppendToFile value= "true"/>
            <!--log保留天数-->
            <MaxSizeRollBackups value= "10"/>
            <!--日志文件名是否是固定不变的-->
            <StaticLogFileName value= "false"/>
            <!--日志文件名格式为:2008-08-31.log-->
            <DatePattern value= "yyyy-MM-dd&quot;.log&quot;"/>
            <!--日志根据日期滚动-->
            <RollingStyle value= "Date"/>
            <layout type="log4net.Layout.PatternLayout">
                <ConversionPattern value="[%date{HH:mm:ss,fff}][%t][%-5level][%F:%L] %m%n" />
            </layout>
        </appender>

        <!-- 控制台前台显示日志 -->
        <appender name="ColoredConsoleAppender" type="log4net.Appender.ColoredConsoleAppender">
            <mapping>
                <level value="ERROR" />
                <foreColor value="Red, HighIntensity" />
            </mapping>
            <mapping>
                <level value="Info" />
                <foreColor value="Green" />
            </mapping>
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="[%date{HH:mm:ss,fff}][%-5level] %m%n" />
            </layout>

            <filter type="log4net.Filter.LevelRangeFilter">
                <LevelMin value="Info" />
                <LevelMax value="Fatal" />
            </filter>
        </appender>

        <!-- MYSQL日志 -->
        <appender name="ADONetAppender" type="log4net.Appender.ADONetAppender">
            <param name="ConnectionType" value="MySql.Data.MySqlClient.MySqlConnection, MySql.Data" />
            <param name="ConnectionString" value="Server=192.168.0.228;port=3306;User ID=root;password=111111;database=log4net;charset=utf8;Allow User Variables=True"/>
            <param name="CommandText" value="insert into log(log_datetime,log_thread,log_level,log_logger,log_message) values(@log_datetime, @log_thread , @log_level, @log_logger, @log_message)" />

            <param name="Parameter">
                <param name="ParameterName" value="@log_datetime" />
                <param name="DbType" value="DateTime" />
                <param name="Layout" type="log4net.Layout.PatternLayout">
                    <param name="ConversionPattern" value="%d{yyyy'-'MM'-'dd HH':'mm':'ss'.'fff}" />
                </param>
            </param>

            <param name="Parameter">
                <param name="ParameterName" value="@log_thread" />
                <param name="DbType" value="String" />
                <param name="Size" value="255" />
                <param name="Layout" type="log4net.Layout.PatternLayout">
                    <param name="ConversionPattern" value="%t" />
                </param>
            </param>
            <param name="Parameter">
                <param name="ParameterName" value="@log_level" />
                <param name="DbType" value="String" />
                <param name="Size" value="50" />
                <param name="Layout" type="log4net.Layout.PatternLayout">
                    <param name="ConversionPattern" value="%p" />
                </param>
            </param>
            <param name="Parameter">
                <param name="ParameterName" value="@log_logger" />
                <param name="DbType" value="String" />
                <param name="Size" value="255" />
                <param name="Layout" type="log4net.Layout.PatternLayout">
                    <param name="ConversionPattern" value="%c" />
                </param>
            </param>
            <param name="Parameter">
                <param name="ParameterName" value="@log_message" />
                <param name="DbType" value="String" />
                <param name="Size" value="10000" />
                <param name="Layout" type="log4net.Layout.PatternLayout">
                    <param name="ConversionPattern" value="%m" />
                </param>
            </param>

        </appender>



    </log4net>
</configuration>